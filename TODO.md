# envault TODO リスト

## 実装済みの機能

### 1. `export`コマンドによる環境変数の設定

#### 課題と解決策
`export`コマンドを使用して環境変数を直接現在のシェルに設定することは、Goのプログラムが子プロセスとして実行され、その子プロセス内で設定された環境変数が親シェルに影響を与えないという技術的制限によって困難でした。

#### 実装した解決策
1. **シェルスクリプトの出力と評価（従来の方法）**
   - `envault export --output-script-only`コマンドを実装し、環境変数を設定するシェルスクリプトを出力
   - ユーザーが`eval $(envault export --output-script-only)`または`source <(envault export --output-script-only)`を使用して実行する必要がある

2. **新しいbashセッションの起動**
   - `envault export --new-shell`コマンドを実装し、環境変数を設定した新しいbashセッションを起動
   - 元のシェルには影響を与えないが、新しいシェル内ですべての環境変数が利用可能になる

3. **コマンド実行オプション**
   - `envault export -- command args`形式で、環境変数を設定してから指定されたコマンドを実行する機能を実装
   - 例: `envault export -- env | grep TEST_VAR`
   - 例: `envault export -- node app.js`

### 2. その他の実装済み機能
- `dump`コマンドによる暗号化されたファイルの内容表示
- 対話式およびstdinからのパスワード入力対応
- godotenvライブラリを使用した.envファイル解析の改善

## 将来の改善案

1. **ユーザー体験の向上**
   - より直感的なコマンドラインインターフェースの提供
   - シェルのラッパースクリプトの提供

2. **追加機能**
   - パスワード強度チェック機能の追加
   - 複数の.envファイルの管理機能
   - GUIインターフェースの提供

## 技術的な制約

Goのようなプログラミング言語で作成されたプログラムは、親シェルの環境変数を直接変更することができないという根本的な制約があります。これはOSのセキュリティモデルによるものであり、子プロセスは親プロセスの環境を変更できないようになっています。

この制約を回避するために、以下の方法を実装しました：
1. シェルスクリプトを生成して`eval`または`source`コマンドで実行する方法
2. 新しいbashセッションを起動する方法
3. 環境変数を設定してから指定されたコマンドを実行する方法

## 今後の方向性

1. 現在の実装をさらに改善し、ユーザー体験を向上させる
2. より多くのユースケースに対応するための機能拡張
3. クロスプラットフォーム対応の強化（Windows対応など）
